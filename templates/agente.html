<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agente de Soporte â€” Royal Crumbs</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/agente.css') }}">
</head>

<body>
  <div class="rc-container">

    <!-- ENCABEZADO -->
    <header class="rc-header">
      <a href="/home" class="rc-back">â€¹</a>
      <h1 class="rc-screen-title">Agente de Soporte</h1>
      <div></div> <!-- espacio vacÃ­o para centrar tÃ­tulo -->
    </header>

    <!-- SECCIÃ“N PRINCIPAL -->
    <section class="support-section">
      <div class="rc-list-card">

        <a href="/agente/dashboard" class="rc-list-item">
          <span>ğŸ“Š Dashboard</span>
          <span class="rc-chevron"></span>
        </a>

        <a href="/agente/tickets" class="rc-list-item">
          <span>ğŸ« Todos los Tickets</span>
          <span class="rc-chevron"></span>
        </a>

        <a href="/agente/mis-tickets" class="rc-list-item">
          <span>ğŸ“ Mis Tickets Asignados</span>
          <span class="rc-chevron"></span>
        </a>

        <a href="/agente/chats" class="rc-list-item">
          <span>ğŸ’¬ Chats en Vivo</span>
          <span class="rc-chevron"></span>
        </a>

        <a href="/agente/mis-chats" class="rc-list-item">
          <span>ğŸ—¨ï¸ Mis Chats Activos</span>
          <span class="rc-chevron"></span>
        </a>

      </div>
    </section>
  </div>

  <script>
    // Guardar ID del usuario en localStorage para que otras pÃ¡ginas lo usen
    const userEmail = "{{ session.get('user_id', '') }}";
    if (userEmail) {
      // Obtener el ID numÃ©rico del usuario
      fetch('/api/user_info?email=' + encodeURIComponent(userEmail))
        .then(r => r.json())
        .then(data => {
          if (data.id_usuario) {
            localStorage.setItem('userId', data.id_usuario);
            localStorage.setItem('userEmail', userEmail);
            console.log('âœ… Usuario guardado:', data.id_usuario);
          }
        })
        .catch(err => console.error('âŒ Error guardando usuario:', err));
    }
  </script>
</body>

</html>